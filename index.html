<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Total Health Handbook</title>
  <script src="https://cdn.jsdelivr.net/npm/react/umd/react.development.js" crossorigin></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.development.js" crossorigin></script>
  <script src="https://cdn.jsdelivr.net/npm/babel-standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>body { font-family: 'Poppins', sans-serif; }</style>
</head>
<body class="bg-gray-50">
  <div id="root"></div>  <script type="text/babel">
    const { useState, useEffect } = React;

    const mealPlans = [
      { day: 'Monday', meals: { breakfast: 'Oatmeal with berries', lunch: 'Quinoa salad', dinner: 'Grilled chicken with veggies' } },
      { day: 'Tuesday', meals: { breakfast: 'Smoothie bowl', lunch: 'Lentil soup', dinner: 'Baked tofu with spinach' } },
      { day: 'Wednesday', meals: { breakfast: 'Greek yogurt with fruit', lunch: 'Veggie wrap', dinner: 'Turkey chili' } },
      { day: 'Thursday', meals: { breakfast: 'Avocado toast', lunch: 'Chicken salad', dinner: 'Stir-fry veggies with rice' } },
      { day: 'Friday', meals: { breakfast: 'Chia pudding', lunch: 'Quinoa & beans', dinner: 'Grilled turkey with broccoli' } },
      { day: 'Saturday', meals: { breakfast: 'Smoothie', lunch: 'Veggie pasta', dinner: 'Baked salmon alternative: chicken with herbs' } },
      { day: 'Sunday', meals: { breakfast: 'Egg muffins', lunch: 'Kale salad', dinner: 'Roasted veggies with lentils' } }
    ];

    const supplements = [
      { name: 'Vitamin D', benefit: 'Supports bone health and immune system' },
      { name: 'Omega-3 (plant-based)', benefit: 'Supports heart and anti-inflammatory functions' },
      { name: 'Probiotics', benefit: 'Supports gut health and digestion' },
      { name: 'Magnesium', benefit: 'Supports muscle function and nervous system' }
    ];

    const gutTips = [
      { tip: 'Include soluble fiber from oats, bananas, and flax to support digestion.' },
      { tip: 'Use fermented foods like kefir or mild sauerkraut to improve microbiome balance.' },
      { tip: 'Stay hydrated to help mucus clearance (important for CF).' },
      { tip: 'Avoid processed sugars that feed harmful gut bacteria.' }
    ];

    const liverTips = [
      { tip: 'Choose lean proteins and moderate portions to reduce liver stress.' },
      { tip: 'Use olive oil or avocado as healthy fats; limit saturated and fried fats.' },
      { tip: 'Cooked vegetables like spinach, carrots, and zucchini are liver-friendly.' },
      { tip: 'Limit salt to manage fluid retention and support liver function.' }
    ];

    const chapters = [
      { title: 'Nutrition', content: 'Learn about macros, micronutrients, anti-inflammatory foods, functional foods, meal timing...', color: 'bg-yellow-100', interactive: false },
      { title: 'Gut Health', content: '', color: 'bg-green-100', interactive: true },
      { title: 'Liver Support', content: '', color: 'bg-red-100', interactive: true },
      { title: 'Mental Health & Nervous System', content: 'Stress management, breathing exercises, grounding, journaling, sleep hygiene...', color: 'bg-blue-100', interactive: false },
      { title: 'Meal Plans', content: '', color: 'bg-purple-100', interactive: true },
      { title: 'Daily Routine / Tracker', content: '', color: 'bg-pink-100', interactive: true },
      { title: 'Supplements & Functional Foods', content: '', color: 'bg-teal-100', interactive: true },
      { title: 'Resources', content: 'Links to research papers, CF & cirrhosis resources, mental health organizations...', color: 'bg-gray-100', interactive: false }
    ];

    function Chapter({ chapter }) {
      const [expanded, setExpanded] = useState(false);
      return (
        <div className={`${chapter.color} mb-4 border p-4 rounded shadow hover:shadow-lg transition`}>
          <h2 className="text-xl font-bold cursor-pointer" onClick={() => setExpanded(!expanded)}>{chapter.title}</h2>
          {expanded && (
            <div className="mt-2">
              {chapter.content && <p className="mb-2">{chapter.content}</p>}
              {chapter.interactive && chapter.title === 'Meal Plans' && <MealPlans />}
              {chapter.interactive && chapter.title === 'Daily Routine / Tracker' && <RoutineTracker />}
              {chapter.interactive && chapter.title === 'Supplements & Functional Foods' && <Supplements />}
              {chapter.interactive && chapter.title === 'Gut Health' && <CheatSheet title='Gut Health Tips' tips={gutTips} />}
              {chapter.interactive && chapter.title === 'Liver Support' && <CheatSheet title='Liver Support Tips' tips={liverTips} />}
            </div>
          )}
        </div>
      );
    }

    function MealPlans() {
      const [expandedDay, setExpandedDay] = useState(null);
      const [completedMeals, setCompletedMeals] = useState(() => JSON.parse(localStorage.getItem('mealProgress') || '{}'));

      const toggleMeal = (day, meal) => {
        const newProgress = { ...completedMeals, [day]: { ...completedMeals[day], [meal]: !completedMeals[day]?.[meal] } };
        setCompletedMeals(newProgress);
        localStorage.setItem('mealProgress', JSON.stringify(newProgress));
      };

      return (
        <div>
          {mealPlans.map((plan, index) => (
            <div key={index} className='mb-2'>
              <h3 className='font-semibold cursor-pointer text-blue-600' onClick={() => setExpandedDay(expandedDay === index ? null : index)}>{plan.day}</h3>
              {expandedDay === index && (
                <ul className='ml-4 mt-1 list-disc'>
                  {Object.entries(plan.meals).map(([mealType, meal], i) => (
                    <li key={i} className={`cursor-pointer ${completedMeals[plan.day]?.[mealType] ? 'line-through text-green-600' : ''}`} onClick={() => toggleMeal(plan.day, mealType)}>
                      <strong>{mealType.charAt(0).toUpperCase() + mealType.slice(1)}:</strong> {meal}
                    </li>
                  ))}
                </ul>
              )}
            </div>
          ))}
        </div>
      );
    }

    function RoutineTracker() {
      const habits = ['Morning breathing & stretch', 'Hydration', 'Journaling', 'Midday walk', 'Mindful eating', 'Evening yoga', 'Evening meditation', 'Track digestion', 'Track mood', 'Track energy'];
      const [checked, setChecked] = useState(() => JSON.parse(localStorage.getItem('routineProgress') || '[]'));

      const toggleCheck = index => {
        const newChecked = [...checked];
        newChecked[index] = !newChecked[index];
        setChecked(newChecked);
        localStorage.setItem('routineProgress', JSON.stringify(newChecked));
      };

      return (
        <ul className='list-disc ml-4'>
          {habits.map((habit, index) => (
            <li key={index} className={`cursor-pointer ${checked[index] ? 'line-through text-green-600' : ''}`} onClick={() => toggleCheck(index)}>{habit}</li>
          ))}
        </ul>
      );
    }

    function Supplements() {
      const [expanded, setExpanded] = useState(Array(supplements.length).fill(false));
      const toggleExpand = index => {
        const newExpanded = [...expanded];
        newExpanded[index] = !newExpanded[index];
        setExpanded(newExpanded);
      };
      return (
        <ul className='ml-4'>
          {supplements.map((supp, index) => (
            <li key={index} className='mb-2'>
              <span className='cursor-pointer text-teal-600' onClick={() => toggleExpand(index)}>{supp.name}</span>
              {expanded[index] && <p className='ml-4 text-gray-700 mt-1'>{supp.benefit}</p>}
            </li>
          ))}
        </ul>
      );
    }

    function CheatSheet({ title, tips }) {
      const [expanded, setExpanded] = useState(Array(tips.length).fill(false));
      const toggleExpand = index => {
        const newExpanded = [...expanded];
        newExpanded[index] = !newExpanded[index];
        setExpanded(newExpanded);
      };
      return (
        <div className='ml-4'>
          <h3 className='text-lg font-semibold mb-2'>{title}</h3>
          <ul className='list-disc'>
            {tips.map((tip, index) => (
              <li key={index} className='mb-1'>
                <span className='cursor-pointer text-teal-600' onClick={() => toggleExpand(index)}>{tip.tip.split(':')[0]}</span>
                {expanded[index] && <p className='ml-4 text-gray-700 mt-1'>{tip.tip}</p>}
              </li>
            ))}
          </ul>
        </div>
      );
    }

    function PrintableSummary() {
      const handlePrint = () => window.print();
      return (<button className='mb-4 px-3 py-1 bg-orange-500 text-white rounded' onClick={handlePrint}>Print Weekly Summary</button>);
    }

    function App() {
      return (
        <div className='max-w-4xl mx-auto p-4'>
          <header className='mb-8'>
            <h1 className='text-3xl font-bold text-center mb-2'>Total Health Handbook</h1>
            <p className='text-center text-gray-700'>CF, Cirrhosis & Whole-Body Wellness Guide</p>
          </header>
          <PrintableSummary />
          <main>
            {chapters.map((chapter, index) => <Chapter key={index} chapter={chapter} />)}
          </main>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script></body>
</html>